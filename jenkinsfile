node{
    def build_image
    withENV([
        'env1=value1',
        'env2=value2'
    ]){
        withCredentials([
            usernamePassword(credntialsID: 'values')
        ]){
            stage('Checkout SCM'){
                checkout scm
            }

            stage('Build Docker Image'){
                dir("${env.WORKSPACE}"){
                    build_image = docker.build("vars", "-f docker_file_path")
                }
            }
        }
    }
}